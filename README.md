# flutter_unreal_viewer

Flutter-приложение, предназначенное для отображения данных, генерируемых на стороне Unreal Engine
сцены. Поставку картинки обеспечивает протокол WebRTC, установление связи через который происходит
через signallingServer.

UnrealEngine из коробки при подключении плагина pixelStreaming предоставляет, так называемый, cirrus.js,
внутри которого прописан функционал взаимодействия. Кроме того, unreal предоставляет веб-плеер,
анализируя работу которого и выборочно извлекая интересующий функционал было спроектировано это приложение.

##  Get started

Для того, чтобы целиком оценить функционал приложения, Вам нужны:
- это приложение
- запущенный cirrus.js (по-другому его называют signallingServer) - суть: синхронизирующий WebSockets-сервер
- запущенная сцена unrealEngine с переданными параметрами командной строки при запуске (редактируется через ярлык)

Параметры командной строки:
'''
        -AudioMixer -PixelStreamingIP=[IP cirrus.js] -PixelStreamingPort=[PORT cirrus streamer] -RenderOffscreen -AllowPixelStreamingCommands=true
'''

- IP и порт мы передаем сцене для того, чтобы циррус впоследствии соединил стримера и плеера (мобильное приложение - плеер)
- RenderOffscreen - аргумент, указывающий на то, что окно открывать не нужно (чтобы мы могли его динамично менять)
- AllowPixelStreamingCommands - чтобы сцена обрабатывала входящие команды от плеера (мы будем использовать для ресайза картинки со стримера)

### Важная помарочка:
Так как и сцена получает адрес с портом сигналлинга, и мобильное приложение, нетрудно догадаться,
что они должны находиться в одной сети. Можно разместить сигналлинг на удаленном сервере с белым IP,
но тогда будут проблемы переходов потока через NAT. Далее читайте про STUN и TURN сервера.

Конфиг для добавления их правится в cirrus.js (где-то далеко в глубине кода). Этот конфиг
отправляется и стримеру, и плееру, поэтому они в курсу куда и зачем идти.

Приложение с этим конфигом работать умеет.

## Назначение:

Симпли-клевер штука с комментами на русском языке, которая сама по себе является безделушкой,
но легко превращается в Cloud-Gaming клиент, или VR-приложение, если пользоваться предусмотренным
Unreal Engine UIInteraction. (В коде будут пометки).

В любом случае крайне рекомендуется к прочтению исходный код, который поставляет UnrealEngine:
cirrus.js, player.html и все скрипты, которые он подгружает.

# Надеюсь, будет интересно